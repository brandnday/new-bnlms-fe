{"version":3,"file":"static/webpack/static/development/pages/report.js.fc80d0958607d8552197.hot-update.js","sources":["webpack:///./actions-redux/report-manager/ReportManagerActionCreator.js"],"sourcesContent":["import { callPost, callPostWithAuth } from \"../common\";\nimport moment from \"moment\";\nimport sortBy from \"lodash/sortBy\";\nimport { REPORT_BIRTHDAY_GET } from \"../../constant/apiEndpoints\";\nimport { selectSelectedChurch } from \"../account/AccountReducer\";\nimport { downloadCSV } from \"../../tools/csvGenerator\";\nexport const downloadBIrthdayReport = monthId => async (dispatch, getState) => {\n  const churchId = selectSelectedChurch(getState());\n  const res = await dispatch(callPostWithAuth(REPORT_BIRTHDAY_GET, {\n    monthId,\n    churchId\n  }));\n  let csvData = [];\n  if (monthId === 12) {\n    csvData = res.rows.map(people => ({\n      Name: people.name,\n      Birthdate: moment(people.birthdate).format(\"DD MMM YYYY\"),\n      Birthmonth: moment(people.birthdate).format(\"MM\")\n    }));\n    csvData = sortBy(csvData, \"Birthmonth\");\n  } else {\n    csvData = res.rows.map(people => ({\n      Name: people.name,\n      Birthdate: moment(people.birthdate).format(\"DD MMM YYYY\")\n    }));\n  }\n  const monthName = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n    \"All Months\"\n  ];\n\n  downloadCSV({\n    filename: `Birthday ${monthName[monthId]}.csv`,\n    data: csvData,\n    columns: [\"Name\", \"Birthdate\"]\n  });\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AAFA;AACA;AAHA;AAEA;AAIA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAKA;AACA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AAAA;AAgBA;AACA;AACA;AACA;AAHA;AACA;AArCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}